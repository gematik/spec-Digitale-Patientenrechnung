{
  "resourceType": "OperationDefinition",
  "id": "ERGPKVOperationSubmit",
  "url": "https://gematik.de/fhir/ergpkv/OperationDefinition/Submit",
  "status": "draft",
  "kind": "operation",
  "name": "ERechnung_Submit",
  "code": "erechnung-submit",
  "resource": [
    "Patient"
  ],
  "system": false,
  "type": false,
  "instance": true,
  "affectsState": true,
  "parameter": [
    {
      "name": "rechnung",
      "use": "in",
      "min": 1,
      "max": "1",
      "documentation": "Vollständige E-Rechnung mit verschiedenen Attachments: 1) PDF 2) Strukturierte Daten inkl. Signatur.",
      "type": "DocumentReference"
    },
    {
      "name": "anhaenge",
      "use": "in",
      "min": 0,
      "max": "*",
      "documentation": "Weitere Anhänge zur E-Rechnung als PDF.",
      "type": "DocumentReference"
    },
    {
      "name": "modus",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "Verarbeitungshinweis für die E-Rechnung. Default: normal.",
      "type": "code",
      "binding": {
        "strength": "required",
        "valueSet": "https://gematik.de/fhir/ergpkv/ValueSet/ergpkv-rechnung-submit-modus-vs"
      }
    },
    {
      "name": "returnTokenPDF",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "Indikation ob nur das durch den FD erstellte Rechnungstoken zurückgegeben werden soll oder das gesamte PDF inkl. Rechnungstoken. Default: false.",
      "type": "boolean"
    },
    {
      "name": "token",
      "use": "out",
      "min": 1,
      "max": "*",
      "documentation": "Token(s) zur eineindeutigen Identifizierung der Rechnungsdokumente/-anhänge (unabhängig von returnTokenPDF).",
      "part": [
        {
          "name": "id",
          "use": "out",
          "min": 1,
          "max": "*",
          "type": "id",
          "documentation": "Randomisiertes Token zur Identifikation eines Dokumentes."
        },
        {
          "name": "docRef",
          "use": "out",
          "min": 1,
          "max": "*",
          "documentation": "Referenz auf die DocumentReference die durch das Token identifiziert wird.",
          "type": "Reference"
        }
      ]
    },
    {
      "name": "warnungen",
      "use": "out",
      "min": 0,
      "max": "1",
      "documentation": "Warnhinweise und Fehlern zur Validierung der E-Rechnung. Diese MÜSSEN in jedem Verarbeitungsmodus ausgegeben werden.",
      "type": "OperationOutcome"
    },
    {
      "name": "tokenPdf",
      "use": "out",
      "min": 0,
      "max": "1",
      "documentation": "PDF mit eingebetteten Rechnungstoken, in Abhängigkeit vom returnTokenPDF-Parameter. Vgl. 4.1 Einreichung per Post des Feature-Dokumentes E-Rechnung.",
      "type": "Binary"
    }
  ]
}
